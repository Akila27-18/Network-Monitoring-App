{% load static %}

{% load navtags %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>NetWatch — {% block title %}{% endblock %}</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { background-color: #0a1628; }
        .sidebar-expanded { width: 16rem; }
        .sidebar-collapsed { width: 4.5rem; }
        .sidebar-transition { transition: width 0.28s ease; }
    </style>
</head>

<body class="text-gray-200 flex h-screen overflow-hidden">

<!-- SIDEBAR -->
<div id="sidebar"
     class="bg-[#0f1b33] border-r border-cyan-400/20 sidebar-expanded sidebar-transition flex flex-col">

    <!-- LOGO -->
    <div class="flex items-center space-x-3 p-4 h-16">
        <img src="{% static 'image/logo.jpg' %}" class="h-10 w-10" />

        <span id="sidebar-title" class="text-2xl font-bold text-cyan-400">NetWatch</span>
    </div>

    <!-- NAVIGATION -->
    <nav class="flex-1 space-y-1 p-2 text-gray-300">

        {% navlink "monitor:dashboard" "activity" "Dashboard" request.path %}
        {% navlink "monitor:traffic" "list" "Network Logs" request.path %}
        {% navlink "monitor:alerts" "bell-ring" "Alerts" request.path %}
        {% navlink "monitor:anomalies" "alert-triangle" "Anomalies" request.path %}
        {% navlink "monitor:reports" "file-text" "Reports" request.path %}
        {% navlink "monitor:system" "settings" "System Status" request.path %}


    </nav>

    <div class="p-4 text-xs text-gray-500">
        © 2025 NetWatch
    </div>
</div>

<!-- MAIN AREA -->
<div class="flex-1 flex flex-col">

    <header class="h-16 bg-[#0f1b33] border-b border-cyan-500/20 flex items-center px-4 justify-between">
        
        <button onclick="toggleSidebar()"
                class="p-2 rounded bg-[#122545] hover:bg-[#1b355c] transition">
            <i data-lucide="menu" class="w-6 h-6"></i>
        </button>

       

        <div class="text-gray-300 flex items-center space-x-3">
            <span>{{ request.user.email }}</span>
            <i data-lucide="user-circle" class="w-7 h-7"></i>
        </div>
    </header>

    <main class="flex-1 overflow-y-auto p-8">
        {% block content %}{% endblock %}
    </main>
</div>

<script>
    lucide.createIcons();

    function toggleSidebar() {
        const sidebar = document.getElementById("sidebar");
        const title = document.getElementById("sidebar-title");
        const texts = document.querySelectorAll(".nav-text");

        const expanded = sidebar.classList.contains("sidebar-expanded");

        sidebar.classList.toggle("sidebar-expanded", !expanded);
        sidebar.classList.toggle("sidebar-collapsed", expanded);

        if (expanded) {
            title.classList.add("hidden");
            texts.forEach(t => t.classList.add("hidden"));
        } else {
            setTimeout(() => {
                title.classList.remove("hidden");
                texts.forEach(t => t.classList.remove("hidden"));
            }, 150);
        }
    }
</script>

</body>
</html>
